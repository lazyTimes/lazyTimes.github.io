<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/dute_favicon_32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/dute_favicon_16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/images/manifest.json">
  <meta name="msapplication-config" content="/images/browserconfig.xml">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="google-site-verification" content="mpI5dkydstZXl6UcDCppqktXK0bbvqdZ6LkZ3KNk4Iw">
  <meta name="baidu-site-verification" content="code-a1LksZX2Ds">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"whitestore.top","root":"/","scheme":"Gemini","version":"7.8.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="SoftReference和WeakReference">
<meta property="og:type" content="article">
<meta property="og:title" content="【Java】What s the difference between SoftReference and WeakReference in Java">
<meta property="og:url" content="https://whitestore.top/2023/06/16/differencebetween/index.html">
<meta property="og:site_name" content="爱看书的阿东">
<meta property="og:description" content="SoftReference和WeakReference">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-06-16T07:13:36.000Z">
<meta property="article:modified_time" content="2023-09-09T00:53:49.935Z">
<meta property="article:author" content="阿东">
<meta property="article:tag" content="SoftReference">
<meta property="article:tag" content="WeakReference">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://whitestore.top/2023/06/16/differencebetween/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>【Java】What s the difference between SoftReference and WeakReference in Java | 爱看书的阿东</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="爱看书的阿东" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">爱看书的阿东</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">赐他一块白色石头，石头上写着新名</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>站点地图</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xhenlUaW1lcw==" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://whitestore.top/2023/06/16/differencebetween/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="阿东">
      <meta itemprop="description" content="随遇而安">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱看书的阿东">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【Java】What s the difference between SoftReference and WeakReference in Java
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-16 15:13:36" itemprop="dateCreated datePublished" datetime="2023-06-16T15:13:36+08:00">2023-06-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-09 08:53:49" itemprop="dateModified" datetime="2023-09-09T08:53:49+08:00">2023-09-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/06/16/differencebetween/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/06/16/differencebetween/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>
            <div class="post-description">SoftReference和WeakReference</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h1><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjk5NjU5L3doYXRzLXRoZS1kaWZmZXJlbmNlLWJldHdlZW4tc29mdHJlZmVyZW5jZS1hbmQtd2Vha3JlZmVyZW5jZS1pbi1qYXZh" title="https://stackoverflow.com/questions/299659/whats-the-difference-between-softreference-and-weakreference-in-java">Whats the difference between SoftReference and WeakReference in Java?<i class="fa fa-external-link"></i></span></p>
<p>From <span class="exturl" data-url="aHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMDYxMTMwMTAzODU4L2h0dHA6Ly93ZWJsb2dzLmphdmEubmV0L2Jsb2cvZW5pY2hvbGFzL2FyY2hpdmUvMjAwNi8wNS91bmRlcnN0YW5kaW5nX3cuaHRtbA==" title="https://web.archive.org/web/20061130103858/http://weblogs.java.net/blog/enicholas/archive/2006/05/understanding_w.html">Understanding Weak References<i class="fa fa-external-link"></i></span>, by Ethan Nicholas:</p>
<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>在学习JVM的过程中大概率会看到类似 <strong>SoftReference</strong> 和 <strong>WeakReference</strong>的字样，本部分挑选了Stack Flow 上的高赞回答进行整理。</p>
<h1 id="Understanding-Weak-References"><a href="#Understanding-Weak-References" class="headerlink" title="Understanding Weak References"></a>Understanding Weak References</h1><p><span class="exturl" data-url="aHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMDYxMTMwMTAzODU4L2h0dHA6Ly93ZWJsb2dzLmphdmEubmV0L2Jsb2cvZW5pY2hvbGFzL2FyY2hpdmUvMjAwNi8wNS91bmRlcnN0YW5kaW5nX3cuaHRtbA==" title="https://web.archive.org/web/20061130103858/http://weblogs.java.net/blog/enicholas/archive/2006/05/understanding_w.html">Understanding Weak References<i class="fa fa-external-link"></i></span></p>
<p>虽然是一篇2006年的博客，但是写的非常好，并且至今也依然有不小的价值，这里简单翻译和提取一下这篇文章的内容。</p>
<p>前面一大段说明写这篇文章的缘由是面试的时候发现很多面试者甚至不知道这个东西，相比之下自己不仅聊了作用和一些细节反差很大。</p>
<blockquote>
<p>Now, Im not suggesting you need to be a weak reference expert to qualify as a decent Java engineer. But I humbly submit that you should at least <em>know what they are</em> – otherwise how will you know when you should be using them? Since they seem to be a little-known feature, here is a brief overview of what weak references are, how to use them, and when to use them.</p>
</blockquote>
<p>现在，我并不是说你需要成为一个薄弱的参考资料专家，才有资格成为一个体面的Java工程师。但我谦虚地认为，你至少应该知道它们是什么 – 否则你怎么会知道什么时候应该使用它们？由于它们似乎是一个鲜为人知的特性，这里简要介绍一下什么是弱引用，如何使用它们，以及何时使用它们。</p>
<a id="more"></a>

<h2 id="Strong-references"><a href="#Strong-references" class="headerlink" title="Strong references"></a>Strong references</h2><p>首先了解一下强引用，任何的<code>new</code>操作都是一个强引用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer buffer = <span class="keyword">new</span> StringBuffer();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>If an object is reachable via a chain of strong references (strongly reachable), it is not eligible for garbage collection.</p>
</blockquote>
<p>如果一个对象具备强引用，并且引用链可到达，那么垃圾回收器就没有资格进行回收。</p>
<h2 id="When-strong-references-are-too-strong"><a href="#When-strong-references-are-too-strong" class="headerlink" title="When strong references are too strong"></a>When strong references are too strong</h2><p>这部分大段文字描述的含义表明，有时候设计系统会把一些强引用对象放到HashMap这样的集合容器当中，它长的像这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">serialNumberMap.put(widget, widgetSerialNumber);</span><br></pre></td></tr></table></figure>

<p>表面上看这似乎工作的很好，但是我们必须知道（<strong>有100%的把握</strong>）何时不再需要这个对象，一旦把这个对象溢出，很有可能存在隐藏的内存泄漏或者强引用无法释放导致无法垃圾回收的问题。</p>
<p>强引用的另外一个问题是缓存，假设你有一个需要处理用户提供的图片的应用程序，你想要利用缓存来减少图像加载带来的磁盘开销，同时要避免两份一模一样的图像同时存在内存当。</p>
<p>对于普通的强引用来说，这个引用本身就会迫使图像留在内存中，这就要求你（就像上面一样）以某种方式确定何时不再需要内存中的图像，并将其从缓存中删除，这样它就有资格被垃圾回收。</p>
<p>最要命的是这种情况下甚至需要考虑垃圾回收器的工作行为。</p>
<h2 id="Weak-references"><a href="#Weak-references" class="headerlink" title="Weak references"></a>Weak references</h2><p>弱引用：简单来说是一个不够强大的引用，不足以迫使一个对象留在内存中。弱引用可以让程序员根据垃圾回收器的行为大致估算引用的生命周期。换句话说，弱引用肯定会在下一次垃圾收集器给回收掉，程序员无需担心类似强引用传递的问题。</p>
<p>在Java当中，通常用<code>java.lang.ref.WeakReference</code>类来表示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">        WeakReference&lt;String&gt; sr = <span class="keyword">new</span> WeakReference&lt;String&gt;(<span class="keyword">new</span> String(<span class="string">"hello"</span>));</span><br><span class="line">         </span><br><span class="line">        System.out.println(sr.get());</span><br><span class="line">        System.gc();                <span class="comment">//通知JVM的gc进行垃圾回收</span></span><br><span class="line">        System.out.println(sr.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">/**输出结果：</span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">null</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>

<p>注意<strong>被弱引用关联的对象是指只有弱引用与之关联</strong>，如果存在强引用同时与之关联，则进行垃圾回收时也不会回收该对象（软引用也是如此）</p>
<h3 id="ReferenceQueue-应用"><a href="#ReferenceQueue-应用" class="headerlink" title="ReferenceQueue 应用"></a>ReferenceQueue 应用</h3><p>此外，弱引用可以和一个引用队列（ReferenceQueue）联合使用，如果弱引用所引用的对象被JVM回收，这个引用就会被加入到与之关联的引用队列中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">referenceQueueUse</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;  </span><br><span class="line">        Object value = <span class="keyword">new</span> Object();  </span><br><span class="line">        Map&lt;Object, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();  </span><br><span class="line">        ReferenceQueue&lt;<span class="keyword">byte</span>[]&gt; referenceQueue = <span class="keyword">new</span> ReferenceQueue&lt;&gt;();  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10000</span>;i++) &#123;  </span><br><span class="line">            <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];  </span><br><span class="line">            WeakReference&lt;<span class="keyword">byte</span>[]&gt; weakReference = <span class="keyword">new</span> WeakReference&lt;<span class="keyword">byte</span>[]&gt;(bytes, referenceQueue);  </span><br><span class="line">            map.put(weakReference, value);  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="comment">// 使用主线程观察 referenceQueue 的对象回收比较麻烦  </span></span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;  </span><br><span class="line">            <span class="keyword">try</span> &#123;  </span><br><span class="line">                <span class="keyword">int</span> cnt = <span class="number">0</span>;  </span><br><span class="line">                WeakReference&lt;<span class="keyword">byte</span>[]&gt; k;  </span><br><span class="line">                <span class="comment">// 等待垃圾回收  </span></span><br><span class="line">                <span class="keyword">while</span>((k = (WeakReference) referenceQueue.remove()) != <span class="keyword">null</span>) &#123;  </span><br><span class="line">                    System.out.println((cnt++) + <span class="string">" 被回收了:"</span> + k);  </span><br><span class="line">                &#125;  </span><br><span class="line">            &#125; <span class="keyword">catch</span>(InterruptedException e) &#123;  </span><br><span class="line">                <span class="comment">//结束循环  </span></span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;);  </span><br><span class="line"><span class="comment">//        thread.setDaemon(true);  </span></span><br><span class="line">        thread.start();  </span><br><span class="line">        thread.join();  </span><br><span class="line">    &#125;<span class="comment">/**  </span></span><br><span class="line"><span class="comment">     0 被回收了:java.lang.ref.WeakReference@138caeca  </span></span><br><span class="line"><span class="comment">     1 被回收了:java.lang.ref.WeakReference@3402b4c9  </span></span><br><span class="line"><span class="comment">     2 被回收了:java.lang.ref.WeakReference@75769ab0  </span></span><br><span class="line"><span class="comment">     3 被回收了:java.lang.ref.WeakReference@2e23c180  </span></span><br><span class="line"><span class="comment">     4 被回收了:java.lang.ref.WeakReference@4aaae508  </span></span><br><span class="line"><span class="comment">     5 被回收了:java.lang.ref.WeakReference@3e84111a  </span></span><br><span class="line"><span class="comment">     6 被回收了:java.lang.ref.WeakReference@2cc04358  </span></span><br><span class="line"><span class="comment">     7 被回收了:java.lang.ref.WeakReference@45bb2aa1  </span></span><br><span class="line"><span class="comment">     8 被回收了:java.lang.ref.WeakReference@1639f93a  </span></span><br><span class="line"><span class="comment">     9 被回收了:java.lang.ref.WeakReference@f3021cb  </span></span><br><span class="line"><span class="comment">     */</span></span><br></pre></td></tr></table></figure>

<p>上面的代码执行之后会触发垃圾回收，中的对象引用变为null就意味着对象是小并且将会被垃圾回收，WeakHashMap必须删除这种失效的条目，以避免持有不断增加的死的WeakReference。</p>
<p>在 WeakReference 中传入 ReferenceQueue，在引用失效的时候会被推入到ReferenceQueue当中。</p>
<h3 id="在类weakHashMap中的使用"><a href="#在类weakHashMap中的使用" class="headerlink" title="在类weakHashMap中的使用"></a>在类weakHashMap中的使用</h3><p>实际上weakHashMap就是使用weakReference当作key来进行数据的存储，所以key被gc之后响应的gc也可以移除掉。</p>
<p><strong>WeakHashMap Weak在于Key而非Value</strong>，WeakHashMap的Key没有其他强引用时，这些key就可能被回收，且WeakHashMap可能会回收这些Key对应的键值对。</p>
<p>这里要举比较容易出错的例子，那就是String 本身为对象，但是如果是 <code>String xx = &quot;xxx&quot;</code>这样的定义方式，由于key会被加载常量池当中自动获得强引用，实际上不会被垃圾回收。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">weakHashMap</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        WeakHashMap&lt;String, String&gt; map = <span class="keyword">new</span> WeakHashMap&lt;&gt;();  </span><br><span class="line">        <span class="comment">// 下面的注释说明 value 对于 WeakHashMap 过期没有任何影响，不管它是否在常量池当中有强引用。  </span></span><br><span class="line">        String value = <span class="keyword">new</span> String(<span class="string">"value"</span>);  </span><br><span class="line"><span class="comment">//        String value = "value";  </span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">// new String 此时编译器无法感知，编译阶段无法提前感知，没有强引用保留。  </span></span><br><span class="line"><span class="comment">//        map.put(new String("key"), value); // &#123;key=value&#125;、  </span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 对于可在编译阶段确定的字符串，系统的字符串常量池会直接记录它，自动保留对它的强引用  </span></span><br><span class="line">        map.put(<span class="string">"key"</span>, value); <span class="comment">// &#123;key=value&#125;  </span></span><br><span class="line">        System.out.println(map);  </span><br><span class="line">  </span><br><span class="line">        System.gc();  </span><br><span class="line">        System.runFinalization();  </span><br><span class="line">  </span><br><span class="line">        System.out.println(map);  </span><br><span class="line">    &#125;<span class="comment">/**运行结果：  </span></span><br><span class="line"><span class="comment">     如果使用 new String("key") 则为下面的结果  </span></span><br><span class="line"><span class="comment">     &#123;key=value&#125;  </span></span><br><span class="line"><span class="comment">     &#123;&#125;  </span></span><br><span class="line"><span class="comment">     由于直接使用了字符串字面量“key”，造成了系统对“key”字符串的缓存，对其施加了强引用，因此GC未能销毁此实例  </span></span><br><span class="line"><span class="comment">     &#123;key=value&#125;  </span></span><br><span class="line"><span class="comment">     &#123;key=value&#125;     */</span></span><br></pre></td></tr></table></figure>

<p>再看看下面的方法，可以看到如果让key，value 的引用同时使用一个引用，value实际使用的还是强引用，由于Key和Value都存在强引用，所以这种情况下也会出现key无法回收的问题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * 模拟 Intern 方法  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;  </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimulaIntern</span>&lt;<span class="title">T</span>&gt; </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> WeakHashMap&lt;T, T&gt; weakHashMap = <span class="keyword">new</span> WeakHashMap&lt;T, T&gt;();  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * 修复之后的对象使用  </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="keyword">private</span> WeakHashMap&lt;String, MyObject&gt; weakHashMapFix = <span class="keyword">new</span> WeakHashMap&lt;&gt;();  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * 此方法存在问题  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> 此方法存在问题  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> T  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> xander  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span> 2023/6/16 14:48  </span></span><br><span class="line"><span class="comment">     */</span>    <span class="function"><span class="keyword">public</span> T <span class="title">intern</span><span class="params">(T item)</span></span>&#123;  </span><br><span class="line">        <span class="keyword">if</span>(weakHashMap.get(item) != <span class="keyword">null</span>)&#123;  </span><br><span class="line">            <span class="keyword">return</span> weakHashMap.get(item);  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="comment">// 根源在于这里的 put， 对于 key 来说是弱引用，但是 value 依旧是强引用保留  </span></span><br><span class="line">        weakHashMap.put(item, item);  </span><br><span class="line">        <span class="keyword">return</span> item;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyObject <span class="title">intern</span><span class="params">(String key, MyObject value)</span> </span>&#123;  </span><br><span class="line">        MyObject object = weakHashMapFix.get(key);  </span><br><span class="line">        <span class="keyword">if</span> (object != <span class="keyword">null</span>) &#123;  </span><br><span class="line">            <span class="keyword">return</span> object;  </span><br><span class="line">        &#125;  </span><br><span class="line">        weakHashMapFix.put(key, value);  </span><br><span class="line">        <span class="keyword">return</span> value;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">"weakHashMap =&gt; "</span>+ weakHashMap);  </span><br><span class="line">        System.out.println(<span class="string">"weakHashMapFix =&gt; "</span>+weakHashMapFix);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyObject</span></span>&#123;  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@Test</span>  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWeakMap</span><span class="params">()</span></span>&#123;  </span><br><span class="line">    <span class="comment">// intern 存在问题  </span></span><br><span class="line">    SimulaIntern&lt;String&gt; testPool = <span class="keyword">new</span> SimulaIntern&lt;&gt;();  </span><br><span class="line">    testPool.intern(<span class="keyword">new</span> String(<span class="string">"testPool"</span>));  </span><br><span class="line">    testPool.print();  </span><br><span class="line">    System.gc();  </span><br><span class="line">    System.runFinalization();  </span><br><span class="line">    testPool.print();  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 可以正常清理，实际上就是把 k 和 value 两者进行拆分  </span></span><br><span class="line">    SimulaIntern simulaIntern = <span class="keyword">new</span> SimulaIntern();  </span><br><span class="line">    simulaIntern.intern(<span class="keyword">new</span> String(<span class="string">"name"</span>), <span class="keyword">new</span> MyObject());  </span><br><span class="line">    simulaIntern.print();  </span><br><span class="line">    System.gc();  </span><br><span class="line">    System.runFinalization();  </span><br><span class="line">    simulaIntern.print();  </span><br><span class="line">&#125;<span class="comment">/**运行结果：  </span></span><br><span class="line"><span class="comment"> // 无法正常清理  </span></span><br><span class="line"><span class="comment"> weakHashMap =&gt; &#123;testPool=testPool&#125;  </span></span><br><span class="line"><span class="comment"> weakHashMap =&gt; &#123;testPool=testPool&#125;  </span></span><br><span class="line"><span class="comment"> // 修改之后， 可以正常清理，实际上就是把 k 和 value 两者进行拆分  </span></span><br><span class="line"><span class="comment"> weakHashMapFix =&gt; &#123;name=com.zxd.interview.weakref.WeakReferenceTest$MyObject@1936f0f5&#125;  </span></span><br><span class="line"><span class="comment"> weakHashMapFix =&gt; &#123;&#125;*/</span></span><br></pre></td></tr></table></figure>

<h2 id="Soft-references"><a href="#Soft-references" class="headerlink" title="Soft references"></a>Soft references</h2><p>软引用和弱引用的区别是，弱引用在没有强引用加持的情况下，通常必然会在下一次垃圾回收给清理掉，但软引用则稍微强一些，一般会坚持更长的时间，一般情况下如果内存足够，软引用基本会被保留。</p>
<p>所以软银用的特征是：<strong>只要内存供应充足，Soft reachable对象通常会被保留</strong>。如果既担心垃圾回收提前处理掉对象，又担心内存消耗的需求，就可以考虑软引用。</p>
<h2 id="Phantom-references"><a href="#Phantom-references" class="headerlink" title="Phantom references"></a>Phantom references</h2><p>虚引用和软引用和弱引用完全不一样，它的 get 方法经常返回 Null，虚引用的唯一用途是跟踪什么时候对象会被放入到引用队列，那么这种放入引用队列的方式和弱引用有什么区别？</p>
<p>主要的区别是入队的时间，WeakReference在它所指向的对象变为弱引用（无强引用）的时候会被推入到队列，因为可以在queue 中获取到弱引用对象，该对象甚至可以通过非正统的finalize()方法 “复活”，但WeakReference仍然是死的。</p>
<p><strong>PhantomReference</strong>只有在<strong>对象被从内存中物理删除时才会被排队</strong>，而且get()方法总是返回null，主要是为了防止你能够 “复活 “一个几乎死去的对象。所以 PhantomReference 会有什么用：</p>
<ul>
<li>它们允许你准确地确定一个对象何时从内存中删除。 </li>
<li>PhantomReferences避免了finalize()的一个基本问题。</li>
</ul>
<p>第一点准确的确定一个对象何时删除，造某些大内存占用的情况下可以实现等待垃圾回收再加载下一个图片防止OOM。</p>
<p>第二点则finalize()方法可以通过为对象创建新的强引用来 “复活 “它们，但是虚引用可以很大概率避免。当一个PhantomReference被排队时，绝对没有办法获得现在已经死亡的对象的指针，该对象可以在第一个垃圾收集周期中被发现可以幻象地到达时被立即清理掉。</p>
<h1 id="Stack-Flow-的答案"><a href="#Stack-Flow-的答案" class="headerlink" title="Stack Flow 的答案"></a>Stack Flow 的答案</h1><p>这些答案基本都来自上面提到的博客相同，这里不再过多赘述。</p>
<p><strong>Weak references</strong></p>
<p> A <em>weak reference</em>, simply put, is a reference that isnt strong enough to force an object to remain in memory. Weak references allow you to leverage the garbage collectors ability to determine reachability for you, so you dont have to do it yourself. You create a weak reference like this</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WeakReference weakWidget = <span class="keyword">new</span> WeakReference(widget);</span><br></pre></td></tr></table></figure>

<p>and then elsewhere in the code you can use <code>weakWidget.get()</code> to get the actual <code>Widget</code> object. Of course the weak reference isnt strong enough to prevent garbage collection, so you may find (if there are no strong references to the widget) that <code>weakWidget.get()</code> suddenly starts returning <code>null</code>.</p>
<p>…</p>
<p><strong>Soft references</strong></p>
<p>A <em>soft reference</em> is exactly like a weak reference, except that it is less eager to throw away the object to which it refers. An object which is only weakly reachable (the strongest references to it are <code>WeakReferences</code>) will be discarded at the next garbage collection cycle, but an object which is softly reachable will generally stick around for a while.</p>
<p><code>SoftReferences</code> arent <em>required</em> to behave any differently than <code>WeakReferences</code>, but in practice softly reachable objects are generally retained as long as memory is in plentiful supply. This makes them an excellent foundation for a cache, such as the image cache described above, since you can let the garbage collector worry about both how reachable the objects are (a strongly reachable object will <em>never</em> be removed from the cache) and how badly it needs the memory they are consuming.</p>
<p>最后的补充部分简单翻译一下</p>
<blockquote>
<p>And Peter Kessler added in a comment:</p>
</blockquote>
<p>下面是评论中的一些补充</p>
<blockquote>
<p>The Sun JRE does treat SoftReferences differently from WeakReferences. We attempt to hold on to object referenced by a SoftReference if there isnt pressure on the available memory. </p>
</blockquote>
<p>Sun JRE对待SoftReferences的方式与WeakReferences不同。如果可用内存并且此时没有使用压力，会尝试保留被SoftReference引用的对象。</p>
<blockquote>
<p>One detail: the policy for the “-client” and “-server” JREs are different: the -client JRE tries to keep your footprint small by preferring to clear SoftReferences rather than expand the heap, whereas the -server JRE tries to keep your performance high by preferring to expand the heap (if possible) rather than clear SoftReferences. One size does not fit all.</p>
</blockquote>
<p>“-client “和”-server “JRE的策略是不同的：</p>
<ul>
<li><code>-client</code>：JRE试图通过<strong>优先清除SoftReferences</strong>而不是扩展堆来保持你的内存。</li>
<li><code>-server</code>：JRE则试图通过优先扩展堆（如果可能）而不是清除SoftReferences来保持你的性能</li>
</ul>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.2.0/dist/mindmap.min.css">
    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>lazytime
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://whitestore.top/2023/06/16/differencebetween/" title="【Java】What s the difference between SoftReference and WeakReference in Java">https://whitestore.top/2023/06/16/differencebetween/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzQuMC96aC1DTg=="><i class="fa fa-fw fa-creative-commons"></i>BY-NC</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/06/15/duoxianc/" rel="prev" title="【Java】《2小时搞定多线程》个人笔记">
      <i class="fa fa-chevron-left"></i> 【Java】《2小时搞定多线程》个人笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/07/09/activitystudy/" rel="next" title="【Activity】从零开始到掌握工作流开发业务代码">
      【Activity】从零开始到掌握工作流开发业务代码 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#原文"><span class="nav-number">1.</span> <span class="nav-text">原文</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#引言"><span class="nav-number">2.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Understanding-Weak-References"><span class="nav-number">3.</span> <span class="nav-text">Understanding Weak References</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Strong-references"><span class="nav-number">3.1.</span> <span class="nav-text">Strong references</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#When-strong-references-are-too-strong"><span class="nav-number">3.2.</span> <span class="nav-text">When strong references are too strong</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Weak-references"><span class="nav-number">3.3.</span> <span class="nav-text">Weak references</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ReferenceQueue-应用"><span class="nav-number">3.3.1.</span> <span class="nav-text">ReferenceQueue 应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在类weakHashMap中的使用"><span class="nav-number">3.3.2.</span> <span class="nav-text">在类weakHashMap中的使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Soft-references"><span class="nav-number">3.4.</span> <span class="nav-text">Soft references</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Phantom-references"><span class="nav-number">3.5.</span> <span class="nav-text">Phantom references</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Stack-Flow-的答案"><span class="nav-number">4.</span> <span class="nav-text">Stack Flow 的答案</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">阿东</p>
  <div class="site-description" itemprop="description">随遇而安</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">238</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xhenlUaW1lcw==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lazyTimes"><i class="fa fa-fw fa-github"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOjEwOTc0ODM1MDhAcXEuY29t" title="E-Mail → mailto:1097483508@qq.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</span>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <span class="exturl" data-url="aHR0cHM6Ly93d3cuNTJwb2ppZS5jbi9ob21lLnBocD9tb2Q9c3BhY2UmdWlkPTE0OTc3MTgmZG89dGhyZWFkJnZpZXc9bWUmZnJvbT1zcGFjZQ==" title="https:&#x2F;&#x2F;www.52pojie.cn&#x2F;home.php?mod&#x3D;space&amp;uid&#x3D;1497718&amp;do&#x3D;thread&amp;view&#x3D;me&amp;from&#x3D;space">吾爱破解</span>
        </li>
        <li class="links-of-blogroll-item">
          <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vdXNlci8yOTk5MTIzNDUyNjI2MzY2" title="https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;2999123452626366">掘金</span>
        </li>
        <li class="links-of-blogroll-item">
          <span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL3UvbGF6eXRpbWVz" title="https:&#x2F;&#x2F;segmentfault.com&#x2F;u&#x2F;lazytimes">思否</span>
        </li>
    </ul>
  </div>

      </div>

      <div class="wechat_OA">
        <span>欢迎关注我的公众号</span>
        <br>
          <!-- 这里添加你的二维码图片 -->
        <img src ="https://adong-picture.oss-cn-shenzhen.aliyuncs.com/adong/wechat_channel.jpg">
      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿东</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.9m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">29:31</span>
</div>
  <div class="powered-by">由 <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl theme-link" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZw==">NexT.Gemini</span> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'qMUpEEvBgXaMDD1b0ftgi9xr-gzGzoHsz',
      appKey     : 'UCdfT4Rfih6MO6y8DI4fstf6',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-CN' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
